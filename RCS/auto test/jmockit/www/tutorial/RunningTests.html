<!DOCTYPE html>
<!--
  ~ Copyright (c) 2006-2014 RogÃ©rio Liesenfeld
  ~ This file is subject to the terms of the MIT license (see LICENSE.txt).
  -->
<html>
<head>
   <title>The JMockit Tutorial - Running tests</title>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
   <link rel="stylesheet" type="text/css" href="../prettify.css"/>
   <link rel="shortcut icon" type="image/x-icon" href="../favicon.ico"/>
   <script type="text/javascript" src="../highlight.pack.js"></script>
   <script type="text/javascript">hljs.initHighlightingOnLoad()</script>
</head>
<body>
<h2 id="top">
   Running tests with JMockit
   <span class="navigation">
      <a href="#ant"><img src="go-down.png" title="Next section"></a>
      <a href="AnExample.html"><img src="go-previous.png" title="Previous chapter"></a>
      <a href="#bottom"><img src="go-bottom.png" title="Bottom"></a>
      <a href="BehaviorBasedTesting.html"><img src="go-next.png" title="Next chapter"></a>
      <a href="../tutorial.html"><img src="go-home.png" title="Contents"></a>
   </span>
</h2>

<p>
   To run tests that use any of the JMockit APIs, use your Java IDE, Ant/Maven script, etc. the way you normally would.
   In principle, any JDK of version <strong>1.6</strong> or newer, on Windows, Mac OS X, or Linux, can be used.
   JMockit supports (and requires) the use of JUnit or TestNG; details specific to each of these test frameworks are as
   follows:
</p>
<ul>
   <li>
      For <strong>JUnit 4.5+</strong> test suites, make sure that <code>jmockit.jar</code> appears <em>before</em>
      the JUnit jar in the classpath.
      Alternatively, annotate test classes with
      <code><span class="annotation">@RunWith</span>(<span class="type">JMockit</span>.class)</code>.
      <br/>
      (Note for <strong>Eclipse</strong> users: when specifying the order of jars in the classpath, make sure to use
      the "Order and Export" tab of the "Java Build Path" window.
      Also, make sure the Eclipse project uses the JRE from a JDK installation instead of a "plain" JRE, since the
      latter lacks the "<code>attach</code>" native library.)
   </li>
   <li>
      For <strong>TestNG 6.2+</strong> test suites, simply add <code>jmockit.jar</code> to the classpath
      (at any position).
   </li>
</ul>
<p>
   In other situations (if running on JDK implementations other than the Oracle JDKs, or if using an older version of
   TestNG), pass <code>-javaagent:<em>&lt;proper path></em>/jmockit.jar</code> as a JVM initialization parameter.
   This can be done in the "Run/Debug Configuration" for both Eclipse and IntelliJ IDEA, or with build tools such as
   Ant and Maven.
</p>

<h3 id="ant">
   Running tests with the JUnit Ant task
   <span class="navigation">
      <a href="#maven"><img src="go-down.png" title="Next section"></a>
      <a href="#top"><img src="go-up.png" title="Top"></a>
      <a href="#bottom"><img src="go-bottom.png" title="Bottom"></a>
      <a href="#top"><img src="go-top.png" title="Top"></a>
      <a href="../tutorial.html"><img src="go-home.png" title="Contents"></a>
   </span>
</h3>
<p>
   When using the <code>&lt;junit></code> element in a <code>build.xml</code> script, it's important to use a separate
   JVM instance. For example, something like the following:
</p>
<pre><code>&lt;junit fork="yes" forkmode="once" dir="directoryContainingJars">
   &lt;classpath path="jmockit.jar"/>

   &lt;!-- To generate (if desired) a code coverage HTML report: -->
   &lt;classpath path="jmockit-coverage.jar"/>

   &lt;!-- Additional classpath entries, including the appropriate junit.jar -->

   &lt;batchtest>
      &lt;!-- filesets specifying the desired test classes -->
   &lt;/batchtest>
&lt;/junit>
</code></pre>

<h3 id="maven">
   Using JMockit in a Maven project
   <span class="navigation">
      <a href="#bottom"><img src="go-down.png" title="Bottom"></a>
      <a href="#ant"><img src="go-up.png" title="Previous section"></a>
      <a href="#bottom"><img src="go-bottom.png" title="Bottom"></a>
      <a href="#top"><img src="go-top.png" title="Top"></a>
      <a href="../tutorial.html"><img src="go-home.png" title="Contents"></a>
   </span>
</h3>
<p>
   The JMockit artifacts are located in the central Maven repository.
   To use them in a test suite, add the following to your <code>pom.xml</code> file:
</p>
<pre><code>&lt;properties>
   &lt;jmockit.version><em>desired version</em>&lt;/jmockit.version>
&lt;/properties>

&lt;dependencies>
   &lt;dependency>
      &lt;groupId>org.jmockit&lt;/groupId>
      &lt;artifactId>jmockit&lt;/artifactId>
      &lt;version>${jmockit.version}&lt;/version>
      &lt;scope>test&lt;/scope>
   &lt;/dependency>
&lt;/dependencies>
</code></pre>
<p>
   Make sure the specified version is the one you actually want. (The use of a property is optional, of course.)
   When using JUnit, this dependency should come <em>before</em> the "<code>junit</code>" dependency.
</p>
<p>
   For information on using JMockit Coverage with Maven, see the <a href="CodeCoverage.html#maven">relevant section</a>
   in the JMockit Tutorial.
</p>

<div id="bottom" class="navigation">
   <a href="AnExample.html"><img src="go-previous.png" title="Previous chapter"></a>
   <a href="#maven"><img src="go-up.png" title="Previous section"></a>
   <a href="BehaviorBasedTesting.html"><img src="go-next.png" title="Next chapter"></a>
   <a href="#top"><img src="go-top.png" title="Top"></a>
   <a href="../tutorial.html"><img src="go-home.png" title="Contents"></a>
</div>
<br/>
</body>
</html>
